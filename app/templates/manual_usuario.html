<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manual de Usuario - ToriaSoft</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Estilos para la barra de desplazamiento */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        ::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #555;
        }
        html {
            scroll-behavior: smooth;
        }
        .screenshot-placeholder {
            border: 2px dashed #cbd5e1;
            background-color: #f8fafc;
            color: #94a3b8;
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 200px;
            text-align: center;
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 0.5rem;
        }
        .role-badge {
            display: inline-block;
            padding: 0.2em 0.6em;
            font-size: 0.75em;
            font-weight: 700;
            line-height: 1;
            text-align: center;
            white-space: nowrap;
            vertical-align: baseline;
            border-radius: 0.25rem;
            margin: 0 0.1rem;
        }
        .role-superusuario { background-color: #7c3aed; color: white; }
        .role-gerente { background-color: #db2777; color: white; }
        .role-administrador { background-color: #2563eb; color: white; }
        .role-vendedor { background-color: #16a34a; color: white; }
        .role-todos { background-color: #475569; color: white; }
    </style>
</head>
<body class="bg-gray-100 font-sans">

<div class="flex min-h-screen">
    <!-- Barra lateral de navegación -->
    <aside class="w-64 bg-gray-800 text-white p-4 fixed h-full overflow-y-auto">
        <h2 class="text-xl font-bold mb-4">ToriaSoft Manual</h2>
        <nav>
            <ul class="space-y-2">
                <li><a href="#introduccion" class="block hover:bg-gray-700 p-2 rounded">Introducción</a></li>
                <li><a href="#roles" class="block hover:bg-gray-700 p-2 rounded">Roles de Usuario</a></li>
                <li><a href="#autenticacion" class="block hover:bg-gray-700 p-2 rounded">Autenticación</a></li>
                <li><a href="#dashboard" class="block hover:bg-gray-700 p-2 rounded">Dashboard</a></li>
                <li><a href="#ventas" class="block hover:bg-gray-700 p-2 rounded">Módulo de Ventas</a></li>
                <li><a href="#inventario" class="block hover:bg-gray-700 p-2 rounded">Módulo de Inventario</a></li>
                <li><a href="#devoluciones" class="block hover:bg-gray-700 p-2 rounded">Devoluciones y Anulaciones</a></li>
                <li><a href="#compras" class="block hover:bg-gray-700 p-2 rounded">Módulo de Compras</a></li>
                <li><a href="#finanzas" class="block hover:bg-gray-700 p-2 rounded">Módulo de Finanzas</a></li>
                <li><a href="#clientes" class="block hover:bg-gray-700 p-2 rounded">Módulo de Clientes</a></li>
                <li><a href="#proveedores" class="block hover:bg-gray-700 p-2 rounded">Módulo de Proveedores</a></li>
                <li><a href="#mercadeo" class="block hover:bg-gray-700 p-2 rounded">Módulo de Mercadeo y Publicidad</a></li>
                <li><a href="#reportes" class="block hover:bg-gray-700 p-2 rounded">Reportes</a></li>
                <li><a href="#configuracion" class="block hover:bg-gray-700 p-2 rounded">Configuración</a></li>
                <li><a href="#perfil" class="block hover:bg-gray-700 p-2 rounded">Perfil de Usuario</a></li>
            </ul>
        </nav>
        <div class="mt-8 pt-4 border-t border-gray-600">
            <a href="{{ url_for('main.login') }}" class="block text-center bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded">
                <i class="fas fa-sign-in-alt mr-2"></i>Volver al Inicio
            </a>
        </div>
    </aside>

    <!-- Contenido principal -->
    <main class="ml-64 p-8 w-full">
        <div class="max-w-4xl mx-auto">

            <section id="introduccion" class="mb-12 bg-white p-6 rounded-lg shadow-md">
                <h1 class="text-3xl font-bold text-gray-800 mb-4 border-b pb-2">Bienvenido al Manual de ToriaSoft</h1>
                <p class="text-gray-600">
                    Este manual proporciona una guía completa para utilizar todas las funcionalidades del sistema de gestión ToriaSoft. Desde la creación de una venta hasta la generación de reportes financieros complejos, aquí encontrará toda la información necesaria para operar el sistema de manera eficiente.
                </p>
                <p class="mt-2 text-gray-600">
                    Utilice el menú de navegación a la izquierda para saltar a la sección de su interés.
                </p>
            </section>

            <section id="roles" class="mb-12 bg-white p-6 rounded-lg shadow-md">
                <h2 class="text-2xl font-bold text-gray-800 mb-4"><i class="fas fa-users-cog mr-2"></i>Roles de Usuario</h2>
                <p class="text-gray-600 mb-4">El sistema cuenta con diferentes roles, cada uno con permisos específicos para acceder a distintas funcionalidades:</p>
                <ul class="space-y-3">
                    <li><span class="role-badge role-superusuario">Superusuario</span>: Acceso total a todas las funcionalidades del sistema, incluyendo la configuración crítica de la empresa.</li>
                    <li><span class="role-badge role-gerente">Gerente</span>: Acceso a la mayoría de las funcionalidades operativas y de reporte, como gestión de inventario, costos, finanzas y creación de usuarios.</li>
                    <li><span class="role-badge role-administrador">Administrador</span>: Acceso a módulos financieros, de compras, recepciones y ajustes de inventario. No tiene acceso a la configuración de costos generales, pero sí a la edición de costos por producto.</li>
                    <li><span class="role-badge role-vendedor">Vendedor</span>: Acceso limitado principalmente al módulo de creación de órdenes de venta y gestión de clientes.</li>
                </ul>
                <p class="mt-4 text-sm text-gray-500">A lo largo de este manual, se indicará qué roles tienen acceso a cada función.</p>
            </section>

            <section id="autenticacion" class="mb-12 bg-white p-6 rounded-lg shadow-md">
                <h2 class="text-2xl font-bold text-gray-800 mb-4"><i class="fas fa-key mr-2"></i>Autenticación</h2>
                <h3 class="text-xl font-semibold text-gray-700 mb-2">Inicio de Sesión</h3>
                <p class="text-gray-600">Para acceder al sistema, debe ingresar su nombre de usuario y contraseña en la pantalla de inicio. Si los datos son correctos, será redirigido a su página principal (Dashboard para administradores, Nueva Orden para vendedores).</p>
                <div class="my-4 border rounded-lg overflow-hidden shadow-lg">
                    <img src="{{ url_for('static', filename='img/manual_usuario/login.png') }}" alt="Captura de pantalla de la página de inicio de sesión" class="w-full">
                </div>
                <h3 class="text-xl font-semibold text-gray-700 mt-4 mb-2">Cierre de Sesión</h3>
                <p class="text-gray-600">Para salir del sistema de forma segura, haga clic en su imagen de perfil en la esquina superior derecha y seleccione "Cerrar Sesión".</p>
            </section>

            <section id="dashboard" class="mb-12 bg-white p-6 rounded-lg shadow-md">
                <h2 class="text-2xl font-bold text-gray-800 mb-4"><i class="fas fa-tachometer-alt mr-2"></i>Dashboard</h2>
                <p class="mb-4"><span class="role-badge role-administrador">Administrador</span> <span class="role-badge role-gerente">Gerente</span> <span class="role-badge role-superusuario">Superusuario</span></p>
                <p class="text-gray-600">El Dashboard es la página principal para los roles administrativos. Ofrece una vista general y en tiempo real del estado del negocio, incluyendo:</p>
                <ul class="list-disc list-inside text-gray-600 space-y-2 mt-4">
                    <li><strong>Métricas Generales:</strong> Total de productos, existencias totales, valor del inventario y número de clientes.</li>
                    <li><strong>Cuentas por Cobrar:</strong> Total de clientes con deudas y el monto total adeudado en USD.</li>
                    <li><strong>Estadísticas de Órdenes:</strong> Resumen de ventas (cantidad y monto) para el día actual, el mes en curso y el histórico total.</li>
                    <li><strong>Movimientos del Día:</strong> Un resumen de los ingresos y egresos por cada cuenta bancaria y caja de efectivo.</li>
                    <li><strong>Gráficos Financieros:</strong> Gráficos de dona que muestran la composición de ventas y gastos para el día y el mes actual.</li>
                    <li><strong>Actividad Reciente:</strong> Listas de los últimos productos agregados y las últimas órdenes creadas.</li>
                </ul>
                <div class="my-4 border rounded-lg overflow-hidden shadow-lg">
                    <img src="{{ url_for('static', filename='img/manual_usuario/dashboard.png') }}" alt="Captura de pantalla del Dashboard" class="w-full">
                </div>
            </section>

            <section id="ventas" class="mb-12 bg-white p-6 rounded-lg shadow-md">
                <h2 class="text-2xl font-bold text-gray-800 mb-4"><i class="fas fa-shopping-cart mr-2"></i>Módulo de Ventas</h2>
                
                <h3 class="text-xl font-semibold text-gray-700 mb-2">Crear Nueva Orden de Venta</h3>
                <p class="mb-4"><span class="role-badge role-todos">Todos los roles</span></p>
                <p class="text-gray-600">Esta es la pantalla principal para registrar ventas. El proceso es el siguiente:</p>
                <ol class="list-decimal list-inside text-gray-600 space-y-2 mt-4">
                    <li><strong>Seleccionar Cliente:</strong> Busque un cliente existente por nombre, cédula o RIF. Si el cliente no existe, el sistema le permitirá crearlo directamente desde esta pantalla.</li>
                    <li><strong>Añadir Productos:</strong> Puede añadir productos de tres maneras:
                        <ul class="list-disc list-inside ml-6 mt-2">
                            <li><strong>Escanear Código de Barras:</strong> Es el método más rápido. Simplemente escanee el código y el producto se añadirá a la lista.</li>
                            <li><strong>Buscar por Nombre/Código:</strong> Escriba el nombre o código del producto para ver sugerencias y selecciónelo.</li>
                            <li><strong>Selección Manual:</strong> Use la lista desplegable para encontrar y añadir un producto.</li>
                        </ul>
                    </li>
                    <li><strong>Ajustar Cantidades y Precios:</strong> Modifique la cantidad de cada producto. Los gerentes y superusuarios también pueden editar el precio de venta en USD directamente en la orden.</li>
                    <li><strong>Aplicar Descuento:</strong> Si es necesario, active la casilla de descuento e ingrese el monto en USD a descontar del total.</li>
                    <li><strong>Seleccionar Tipo de Venta:</strong> Elija entre Venta Regular, Venta a Crédito o Apartado.</li>
                    <li><strong>Procesar Pago:</strong> Haga clic en "Procesar Pago". Se abrirá un modal donde podrá registrar uno o varios métodos de pago (efectivo, transferencia, punto de venta, etc.) hasta cubrir el total de la orden. Para créditos y apartados, puede registrar un abono inicial o ninguno.</li>
                    <li><strong>Finalizar Orden:</strong> Una vez verificados los pagos, haga clic en "Finalizar y Crear Orden". El sistema validará el stock en tiempo real y, si todo es correcto, creará la orden y le redirigirá a la página de impresión.</li>
                </ol>
                <div class="my-4 border rounded-lg overflow-hidden shadow-lg">
                    <img src="{{ url_for('static', filename='img/manual_usuario/nueva_orden.png') }}" alt="Captura de pantalla de la página de Nueva Orden" class="w-full">
                </div>
                <h4 class="text-lg font-semibold text-gray-700 mt-4 mb-2">Detalle del Modal de Pagos</h4>
                <p class="text-gray-600">El modal de pagos es una herramienta flexible para registrar cómo el cliente abona la orden. Permite combinar múltiples métodos de pago:</p>
                <ul class="list-disc list-inside text-gray-600 space-y-2 mt-2">
                    <li><strong>Efectivo (Bs o USD):</strong> Seleccione la caja donde ingresa el dinero.</li>
                    <li><strong>Transferencia/Pago Móvil:</strong> Se le pedirá la referencia, el banco de origen, los datos del emisor (teléfono/C.I.) y el banco de destino.</li>
                    <li><strong>Punto de Venta:</strong> Seleccione el punto de venta utilizado. El sistema asociará el ingreso al banco configurado para ese POS.</li>
                </ul>
                <p class="mt-2 text-gray-600">A medida que agrega pagos, el sistema muestra el monto total pagado y el restante, facilitando el cálculo del vuelto si es necesario.</p>
                <div class="my-4 border rounded-lg overflow-hidden shadow-lg">
                    <img src="{{ url_for('static', filename='img/manual_usuario/modal_pagos.png') }}" alt="Captura de pantalla del Modal de Pagos" class="w-full">
                </div>
                
                <h3 class="text-xl font-semibold text-gray-700 mt-6 mb-2">Tipos de Venta Especiales</h3>
                <h4 class="text-lg font-semibold text-gray-700 mt-4 mb-2">Entrega Especial</h4>
                <p class="text-gray-600">Las entregas especiales se utilizan para salidas de mercancía que no corresponden a una venta tradicional, como donaciones, uso interno o muestras. Estas órdenes requieren un motivo obligatorio y, si son creadas por un vendedor, quedan en estado "Pendiente de Aprobación" hasta que un Gerente las autorice. El stock solo se descuenta una vez aprobada la entrega.</p>
                <div class="screenshot-placeholder">
                    <i class="fas fa-image text-4xl mb-2"></i>
                    <p>Captura de pantalla: Selección de tipo de venta "Entrega Especial" y campo de motivo</p>
                </div>

                <h3 class="text-xl font-semibold text-gray-700 mt-6 mb-2">Lista de Órdenes</h3>
                <p class="mb-4"><span class="role-badge role-todos">Todos los roles</span></p>
                <p class="text-gray-600">Muestra un historial de todas las órdenes de venta. Puede filtrar por cliente, número de orden, estado y rango de fechas. Desde aquí puede acceder al detalle de cada orden.</p>

                <h3 class="text-xl font-semibold text-gray-700 mt-6 mb-2">Detalle de Orden e Impresión</h3>
                <p class="mb-4"><span class="role-badge role-todos">Todos los roles</span></p>
                <p class="text-gray-600">Muestra toda la información de una orden específica, incluyendo productos, montos, pagos realizados y saldo pendiente. Desde aquí se puede reimprimir la nota de entrega o el recibo.</p>

                <h3 class="text-xl font-semibold text-gray-700 mt-6 mb-2">Créditos y Apartados</h3>
                <p class="mb-4"><span class="role-badge role-todos">Todos los roles</span></p>
                <p class="text-gray-600">El sistema permite gestionar ventas que no se pagan en su totalidad al momento de la creación. Estas se dividen en Créditos y Apartados, cada una con su propia sección en el menú de Ventas.</p>
                
                <h4 class="text-lg font-semibold text-gray-700 mt-4 mb-2">Gestión de Créditos</h4>
                <p class="text-gray-600">Una venta a crédito implica que el cliente se lleva el producto y paga el saldo pendiente posteriormente. Para gestionar estos pagos:</p>
                <ol class="list-decimal list-inside text-gray-600 space-y-2 mt-2">
                    <li>Vaya a "Ventas" > "Créditos" en el menú lateral para ver la lista de todas las órdenes a crédito.</li>
                    <li>Haga clic en el ID de la orden para acceder a su página de detalle.</li>
                    <li>En la página de detalle, verá el saldo pendiente y un botón para "Registrar Abono".</li>
                    <li>Al hacer clic, se abrirá el mismo modal de pagos que en una venta normal. Registre el pago que el cliente está realizando.</li>
                    <li>Una vez que el crédito esté totalmente pagado, su estado cambiará automáticamente a "Pagada".</li>
                </ol>

                <h4 class="text-lg font-semibold text-gray-700 mt-4 mb-2">Gestión de Apartados</h4>
                <p class="text-gray-600">En un apartado, el producto se reserva para el cliente mientras este realiza abonos hasta completar el pago. El producto no se entrega hasta que el pago esté completo.</p>
                <ol class="list-decimal list-inside text-gray-600 space-y-2 mt-2">
                    <li>Vaya a "Ventas" > "Apartados" para ver la lista de apartados activos y completados.</li>
                    <li>Acceda al detalle del apartado que desea gestionar.</li>
                    <li>Utilice el botón "Registrar Abono" para añadir nuevos pagos.</li>
                    <li>Cuando el saldo pendiente llegue a cero, el estado cambiará a "Pagado".</li>
                    <li>Una vez pagado, aparecerá un botón para "Marcar como Entregado". Úselo cuando el cliente retire el producto para finalizar el ciclo del apartado.</li>
                </ol>
            </section>

            <section id="devoluciones" class="mb-12 bg-white p-6 rounded-lg shadow-md">
                <h2 class="text-2xl font-bold text-gray-800 mb-4"><i class="fas fa-undo-alt mr-2"></i>Devoluciones, Anulaciones e Intercambios</h2>
                <p class="mb-4"><span class="role-badge role-administrador">Administrador</span> <span class="role-badge role-gerente">Gerente</span> <span class="role-badge role-superusuario">Superusuario</span></p>
                <p class="text-gray-600">
                    Esta funcionalidad permite gestionar la anulación completa de una venta, la devolución parcial de productos o el intercambio de mercancía. Se accede a través del menú "Ventas" > "Devoluciones" o directamente desde el detalle de una orden.
                </p>

                <h3 class="text-xl font-semibold text-gray-700 mt-6 mb-2">Anulación Total</h3>
                <p class="text-gray-600">
                    Esta opción se utiliza para cancelar una orden de venta por completo. El sistema realiza las siguientes acciones automáticamente:
                </p>
                <ul class="list-disc list-inside text-gray-600 space-y-2 mt-2">
                    <li>Todos los productos de la orden son devueltos al inventario del almacén de origen.</li>
                    <li>Todos los pagos registrados en la orden son revertidos, generando movimientos de egreso en las cuentas correspondientes (cajas o bancos).</li>
                    <li>La orden original queda marcada con el estado "Anulada".</li>
                    <li>Se crea un registro de la anulación en el historial de devoluciones.</li>
                </ul>

                <h3 class="text-xl font-semibold text-gray-700 mt-6 mb-2">Devolución Parcial</h3>
                <p class="text-gray-600">
                    Permite devolver solo algunos productos o una parte de la cantidad vendida. El proceso es el siguiente:
                </p>
                <ol class="list-decimal list-inside text-gray-600 space-y-2 mt-2">
                    <li>Busque la orden por su ID en la pantalla de devoluciones.</li>
                    <li>En la sección "Devolución Parcial", ingrese la cantidad a devolver para cada producto.</li>
                    <li>Escriba un motivo obligatorio para la devolución.</li>
                    <li>Haga clic en "Procesar Devolución Parcial". Se abrirá un modal para gestionar el reembolso.</li>
                    <li><strong>Gestión del Reembolso:</strong> El sistema calculará el valor total en Bolívares de los productos devueltos. En el modal, deberá registrar cómo se le devuelve el dinero al cliente (ej. en efectivo desde una caja, por transferencia desde un banco). El monto del reembolso debe coincidir con el valor de la devolución.</li>
                    <li>Al confirmar, el sistema devolverá el stock de los productos seleccionados, registrará el egreso financiero del reembolso y marcará la orden original como "Devolución Parcial".</li>
                </ol>
                <div class="my-4 border rounded-lg overflow-hidden shadow-lg">
                    <img src="{{ url_for('static', filename='img/manual_usuario/devolucion.png') }}" alt="Captura de pantalla de la página de Devoluciones" class="w-full">
                </div>

                <h3 class="text-xl font-semibold text-gray-700 mt-6 mb-2">Intercambio de Productos</h3>
                <p class="text-gray-600">
                    Permite al cliente devolver uno o varios productos y llevarse otros en la misma transacción. El sistema calcula la diferencia de valor automáticamente.
                </p>
                <ol class="list-decimal list-inside text-gray-600 space-y-2 mt-2">
                    <li>En la pantalla de devolución, seleccione la opción <strong>"Intercambio"</strong>.</li>
                    <li>Indique los productos y cantidades que el cliente está devolviendo (Entrada al inventario).</li>
                    <li>Busque y agregue los nuevos productos que el cliente se llevará (Salida del inventario).</li>
                    <li>El sistema mostrará el balance:
                        <ul class="list-disc list-inside ml-6">
                            <li><strong>A favor del cliente:</strong> Se debe procesar un reembolso por la diferencia.</li>
                            <li><strong>A favor de la tienda:</strong> El cliente debe pagar la diferencia.</li>
                        </ul>
                    </li>
                    <li>Confirme la operación para actualizar el inventario y registrar los movimientos financieros correspondientes.</li>
                </ol>
                <div class="screenshot-placeholder">
                    <i class="fas fa-image text-4xl mb-2"></i>
                    <p>Captura de pantalla: Interfaz de Intercambio de Productos</p>
                </div>

                <h3 class="text-xl font-semibold text-gray-700 mt-6 mb-2">Historial de Devoluciones</h3>
                <p class="text-gray-600">
                    Todas las anulaciones y devoluciones parciales quedan registradas en el "Historial de Devoluciones", accesible desde el menú de Ventas. Desde aquí puede consultar el detalle de cada operación, viendo qué productos se devolvieron, el motivo y los reembolsos financieros asociados.
                </p>
            </section>

            <section id="inventario" class="mb-12 bg-white p-6 rounded-lg shadow-md">
                <h2 class="text-2xl font-bold text-gray-800 mb-4"><i class="fas fa-boxes mr-2"></i>Módulo de Inventario</h2>

                <h3 class="text-xl font-semibold text-gray-700 mb-2">Lista de Inventario</h3>
                <p class="mb-4"><span class="role-badge role-todos">Todos los roles</span></p>
                <p class="text-gray-600">Muestra todos los productos registrados en el sistema. Permite buscar, filtrar por grupo y ordenar. Los roles con permisos pueden crear, editar y ver el detalle de cada producto desde aquí.</p>

                <h3 class="text-xl font-semibold text-gray-700 mt-6 mb-2">Crear Producto</h3>
                <p class="mb-4"><span class="role-badge role-administrador">Administrador</span> <span class="role-badge role-gerente">Gerente</span> <span class="role-badge role-superusuario">Superusuario</span></p>
                <p class="text-gray-600">Formulario para añadir nuevos productos al sistema (nombre, descripción, imagen, marca, grupo, etc.). El costo y precio se gestionan en la sección de Costos.</p>

                <h3 class="text-xl font-semibold text-gray-700 mt-6 mb-2">Editar Producto</h3>
                <p class="mb-4"><span class="role-badge role-gerente">Gerente</span> <span class="role-badge role-superusuario">Superusuario</span></p>
                <p class="text-gray-600">Permite modificar la información de un producto existente (nombre, descripción, imagen, marca, grupo, etc.).</p>

                <h3 class="text-xl font-semibold text-gray-700 mt-6 mb-2">Existencias por Almacén</h3>
                <p class="mb-4"><span class="role-badge role-todos">Todos los roles</span></p>
                <p class="text-gray-600">Presenta una tabla con todos los productos y su cantidad de stock en cada uno de los almacenes definidos en el sistema. Permite generar un reporte en PDF para el conteo físico de inventario.</p>

                <h3 class="text-xl font-semibold text-gray-700 mt-6 mb-2">Ajuste de Inventario</h3>
                <p class="mb-4"><span class="role-badge role-administrador">Administrador</span> <span class="role-badge role-gerente">Gerente</span> <span class="role-badge role-superusuario">Superusuario</span></p>
                <p class="text-gray-600">Herramienta para corregir las cantidades de stock del sistema y hacer que coincidan con el conteo físico real. Seleccione un almacén, y el sistema mostrará el stock teórico. Ingrese el stock real en las casillas correspondientes para los productos que necesiten ajuste y añada un motivo. El sistema generará un registro de ajuste y los movimientos de entrada o salida correspondientes.</p>
                <div class="my-4 border rounded-lg overflow-hidden shadow-lg">
                    <img src="{{ url_for('static', filename='img/manual_usuario/ajuste_inventario.png') }}" alt="Captura de pantalla de la página de Ajuste de Inventario" class="w-full">
                </div>

                <h3 class="text-xl font-semibold text-gray-700 mt-6 mb-2">Cargar Inventario desde Excel</h3>
                <p class="mb-4"><span class="role-badge role-gerente">Gerente</span> <span class="role-badge role-superusuario">Superusuario</span></p>
                <p class="text-gray-600">Permite crear o actualizar productos de forma masiva utilizando un archivo de Excel. Siga las instrucciones en pantalla sobre el formato de las columnas. Si el código de barras de un producto ya existe, el sistema le pedirá confirmar si desea sumar la nueva cantidad al stock existente.</p>

                <h3 class="text-xl font-semibold text-gray-700 mt-6 mb-2">Imprimir Códigos de Barra</h3>
                <p class="mb-4"><span class="role-badge role-gerente">Gerente</span> <span class="role-badge role-superusuario">Superusuario</span></p>
                <p class="text-gray-600">Genere etiquetas con códigos de barra para sus productos. Puede buscar y seleccionar múltiples productos. El sistema generará un PDF con una etiqueta por cada unidad en existencia del producto seleccionado, lista para imprimir.</p>

                <h3 class="text-xl font-semibold text-gray-700 mt-6 mb-2">Gestión de Almacenes y Traslados</h3>
                <p class="mb-4"><span class="role-badge role-gerente">Gerente</span> <span class="role-badge role-superusuario">Superusuario</span></p>
                <p class="text-gray-600">Desde "Gestión de Almacenes" puede crear y editar los almacenes de su empresa. La función "Traslado entre Almacenes" le permite mover stock de un almacén a otro, generando los registros de movimiento correspondientes y un reporte imprimible de la operación.</p>
                <h4 class="text-lg font-semibold text-gray-700 mt-4 mb-2">Pasos para realizar un traslado:</h4>
                <ol class="list-decimal list-inside text-gray-600 space-y-2 mt-2">
                    <li>Vaya a "Inventario" > "Traslados".</li>
                    <li>Seleccione el <strong>Almacén de Origen</strong> (desde donde sale la mercancía) y el <strong>Almacén de Destino</strong> (hacia donde va).</li>
                    <li>Ingrese un motivo para el traslado (ej. "Reabastecimiento", "Mercancía dañada").</li>
                    <li>Busque los productos a trasladar por nombre o escaneando el código de barras.</li>
                    <li>Indique la cantidad a mover para cada producto. El sistema validará que exista stock suficiente en el origen.</li>
                    <li>Haga clic en "Confirmar Traslado". Se generará un comprobante PDF con los detalles de la operación.</li>
                </ol>
                <div class="screenshot-placeholder">
                    <i class="fas fa-image text-4xl mb-2"></i>
                    <p>Captura de pantalla: Formulario de Traslado entre Almacenes</p>
                </div>
            </section>

            <section id="compras" class="mb-12 bg-white p-6 rounded-lg shadow-md">
                <h2 class="text-2xl font-bold text-gray-800 mb-4"><i class="fas fa-truck-loading mr-2"></i>Módulo de Compras</h2>
                <p class="mb-4"><span class="role-badge role-administrador">Administrador</span> <span class="role-badge role-gerente">Gerente</span> <span class="role-badge role-superusuario">Superusuario</span></p>

                <h3 class="text-xl font-semibold text-gray-700 mb-2">Órdenes de Compra</h3>
                <p class="text-gray-600">Permite crear órdenes de compra a proveedores, especificando los productos, cantidades y costos. También puede registrar los pagos realizados por dicha compra, los cuales se reflejarán como egresos en las cuentas financieras.</p>

                <h3 class="text-xl font-semibold text-gray-700 mt-6 mb-2">Recepciones de Mercancía</h3>
                <p class="text-gray-600">Cuando llega la mercancía de una orden de compra, utilice esta función para registrar su ingreso. Seleccione la orden de compra pendiente y especifique la cantidad recibida de cada producto y el almacén de destino. El sistema actualizará automáticamente el stock y el estado de la orden de compra (Recibida Parcialmente o Recibida).</p>
                <div class="my-4 border rounded-lg overflow-hidden shadow-lg">
                    <img src="{{ url_for('static', filename='img/manual_usuario/nueva_recepcion.png') }}" alt="Captura de pantalla de la página de Nueva Recepción" class="w-full">
                </div>
            </section>

            <section id="finanzas" class="mb-12 bg-white p-6 rounded-lg shadow-md">
                <h2 class="text-2xl font-bold text-gray-800 mb-4"><i class="fas fa-university mr-2"></i>Módulo de Finanzas</h2>
                <p class="mb-4"><span class="role-badge role-administrador">Administrador</span> <span class="role-badge role-gerente">Gerente</span> <span class="role-badge role-superusuario">Superusuario</span></p>

                <h3 class="text-xl font-semibold text-gray-700 mb-2">Gestión de Cuentas</h3>
                <p class="text-gray-600">En las secciones "Bancos", "Puntos de Venta" y "Cajas", puede ver y gestionar las cuentas financieras de la empresa. Para cada banco y caja, puede ver un historial detallado de todos los movimientos (ingresos y egresos). La creación de nuevas cuentas está restringida al <span class="role-badge role-superusuario">Superusuario</span>.</p>

                <h3 class="text-xl font-semibold text-gray-700 mt-6 mb-2">Movimientos Manuales</h3>
                <p class="mb-4"><span class="role-badge role-administrador">Administrador</span> <span class="role-badge role-gerente">Gerente</span> <span class="role-badge role-superusuario">Superusuario</span></p>
                <p class="text-gray-600">Permite registrar ingresos o egresos que no están directamente ligados a una venta o compra, como el pago de servicios, sueldos, etc. Estos movimientos afectarán los saldos de las cuentas correspondientes.</p>
                <h3 class="text-xl font-semibold text-gray-700 mt-6 mb-2">Retiros de Efectivo</h3>
                <p class="text-gray-600">Cualquier usuario puede solicitar un retiro de efectivo desde una de las cajas. La solicitud quedará en estado "Pendiente". Los roles administrativos pueden ver y aprobar/rechazar estas solicitudes desde "Retiros Pendientes". Al aprobar un retiro, el saldo de la caja se descuenta y se puede imprimir un recibo.</p>
                <h4 class="text-lg font-semibold text-gray-700 mt-4 mb-2">Proceso de Solicitud de Retiro:</h4>
                <ol class="list-decimal list-inside text-gray-600 space-y-2 mt-2">
                    <li>Vaya a "Finanzas" > "Retiro de Efectivo".</li>
                    <li>Seleccione la caja de origen.</li>
                    <li>Ingrese el monto, la moneda (Bs o USD) y una descripción del motivo.</li>
                    <li>Indique el nombre de la persona que recibe el dinero.</li>
                    <li>Haga clic en "Solicitar Retiro". Si es Gerente, se aprueba automáticamente. Si es Vendedor, debe esperar aprobación.</li>
                </ol>
                <div class="screenshot-placeholder">
                    <i class="fas fa-image text-4xl mb-2"></i>
                    <p>Captura de pantalla: Formulario de Solicitud de Retiro</p>
                </div>
            </section>

            <section id="clientes" class="mb-12 bg-white p-6 rounded-lg shadow-md">
                <h2 class="text-2xl font-bold text-gray-800 mb-4"><i class="fas fa-user-friends mr-2"></i>Módulo de Clientes</h2>
                <p class="mb-4"><span class="role-badge role-todos">Todos los roles</span></p>
                <p class="text-gray-600">Este módulo centraliza toda la información relacionada con sus clientes, facilitando un seguimiento detallado y una gestión eficiente de las relaciones comerciales.</p>

                <h3 class="text-xl font-semibold text-gray-700 mt-6 mb-2">Crear y Listar Clientes</h3>
                <p class="text-gray-600">Puede crear un nuevo cliente desde el menú "Ventas" > "Clientes" > "Nuevo Cliente", o directamente desde la pantalla de "Nueva Orden de Venta" si el cliente no se encuentra en la búsqueda. La lista de clientes muestra toda su base de datos y sirve como punto de acceso para ver los detalles de cada uno.</p>

                <h3 class="text-xl font-semibold text-gray-700 mt-6 mb-2">Detalle del Cliente: Un Centro de Control</h3>
                <p class="text-gray-600">Al hacer clic en un cliente de la lista, accederá a su página de detalle. Esta pantalla es un centro de control completo para ese cliente, donde puede:</p>
                <ul class="list-disc list-inside text-gray-600 space-y-2 mt-2">
                    <li>Ver y editar su información de contacto (nombre, RIF, teléfono, dirección, etc.).</li>
                    <li>Consultar el historial completo de todas sus compras (órdenes).</li>
                    <li>Ver un resumen de su estado de cuenta, incluyendo el monto total que adeuda.</li>
                    <li><strong>Registrar abonos a cualquier orden pendiente:</strong> Para cada orden con saldo pendiente, encontrará un botón para registrar un pago. Esto le permite gestionar todas las deudas de un cliente desde una única pantalla, sin necesidad de ir a la sección de Créditos o Apartados por separado.</li>
                </ul>
                <div class="my-4 border rounded-lg overflow-hidden shadow-lg">
                    <img src="{{ url_for('static', filename='img/manual_usuario/detalle_cliente.png') }}" alt="Captura de pantalla del detalle de un cliente" class="w-full">
                </div>
            </section>

            <section id="proveedores" class="mb-12 bg-white p-6 rounded-lg shadow-md">
                <h2 class="text-2xl font-bold text-gray-800 mb-4"><i class="fas fa-dolly-flatbed mr-2"></i>Módulo de Proveedores</h2>
                <p class="mb-4"><span class="role-badge role-administrador">Administrador</span> <span class="role-badge role-gerente">Gerente</span> <span class="role-badge role-superusuario">Superusuario</span></p>
                <p class="text-gray-600">Este módulo le permite mantener una base de datos organizada de todos sus proveedores. La información registrada aquí se utiliza al crear nuevas órdenes de compra.</p>
                <h3 class="text-xl font-semibold text-gray-700 mt-6 mb-2">Crear y Consultar Proveedores</h3>
                <p class="text-gray-600">Desde el menú "Compras" > "Proveedores", puede acceder a la lista de proveedores existentes y crear nuevos. Al crear un proveedor, puede registrar información detallada, incluyendo:</p>
                <ul class="list-disc list-inside text-gray-600 space-y-2 mt-2">
                    <li>Información fiscal (Nombre, RIF).</li>
                    <li>Datos de contacto (teléfono, email, dirección).</li>
                    <li>Persona de contacto principal.</li>
                    <li>Información bancaria para pagos.</li>
                    <li>Términos de pago y envío acordados.</li>
                </ul>
            </section>

            <section id="mercadeo" class="mb-12 bg-white p-6 rounded-lg shadow-md">
                <h2 class="text-2xl font-bold text-gray-800 mb-4"><i class="fas fa-bullhorn mr-2"></i>Módulo de Mercadeo y Publicidad</h2>
                <p class="mb-4"><span class="role-badge role-administrador">Administrador</span> <span class="role-badge role-gerente">Gerente</span> <span class="role-badge role-superusuario">Superusuario</span></p>
                <p class="text-gray-600">Este módulo permite gestionar las relaciones con proveedores de servicios (como agencias de publicidad, influencers, servicios técnicos) y controlar los pagos mediante intercambio comercial.</p>

                <h3 class="text-xl font-semibold text-gray-700 mt-6 mb-2">Registro de Servicios Prestados</h3>
                <p class="text-gray-600">Cuando un proveedor realiza un servicio para la empresa, debe registrarlo para generar una cuenta por pagar (o saldo a favor del proveedor).</p>
                <ol class="list-decimal list-inside text-gray-600 space-y-2 mt-2">
                    <li>Vaya a "Marketing" > "Proveedores de Servicios" y seleccione el proveedor, o vaya directamente a registrar un nuevo servicio.</li>
                    <li>Ingrese la descripción del servicio y el valor acordado en USD.</li>
                    <li>Al guardar, este monto se suma al saldo a favor del proveedor.</li>
                </ol>

                <h3 class="text-xl font-semibold text-gray-700 mt-6 mb-2">Pagos e Intercambio Comercial</h3>
                <p class="text-gray-600">Existen dos formas de saldar la deuda con un proveedor de servicios:</p>
                <ul class="list-disc list-inside text-gray-600 space-y-2 mt-2">
                    <li><strong>Pago Directo:</strong> Puede registrar un pago en efectivo o transferencia desde el módulo de Mercadeo para cancelar un servicio específico.</li>
                    <li><strong>Intercambio Comercial (En Ventas):</strong> Si el proveedor desea adquirir productos de la tienda como forma de pago:
                        <ol class="list-decimal list-inside ml-6 mt-1">
                            <li>Cree una nueva orden de venta a nombre del proveedor (o su cliente asociado).</li>
                            <li>En el momento del pago, seleccione el método <strong>"Intercambio Comercial"</strong>.</li>
                            <li>El sistema verificará si el proveedor tiene saldo suficiente y descontará el monto de la compra de su saldo a favor.</li>
                        </ol>
                    </li>
                </ul>
                <div class="screenshot-placeholder">
                    <i class="fas fa-image text-4xl mb-2"></i>
                    <p>Captura de pantalla: Estado de cuenta del proveedor de servicios</p>
                </div>
            </section>

            <section id="reportes" class="mb-12 bg-white p-6 rounded-lg shadow-md">
                <h2 class="text-2xl font-bold text-gray-800 mb-4"><i class="fas fa-chart-pie mr-2"></i>Módulo de Reportes</h2>
                
                <h3 class="text-xl font-semibold text-gray-700 mb-2">Cierre Diario</h3>
                <p class="mb-4"><span class="role-badge role-todos">Todos los roles</span></p>
                <p class="text-gray-600">
                    Esta herramienta genera un reporte consolidado de la actividad financiera de un día específico. El reporte incluye un resumen de ventas, desglose de pagos por método, flujo de caja para cada cuenta y la lista de retiros aprobados. Puede visualizarlo en pantalla o generar un PDF completo y detallado.
                </p>
                <div class="my-4 border rounded-lg overflow-hidden shadow-lg">
                    <img src="{{ url_for('static', filename='img/manual_usuario/cierre_diario.png') }}" alt="Captura de pantalla del reporte de Cierre Diario" class="w-full">
                </div>

                <h3 class="text-xl font-semibold text-gray-700 mt-6 mb-2">Reporte Mensual</h3>
                <p class="mb-4"><span class="role-badge role-todos">Todos los roles</span></p>
                <p class="text-gray-600">Permite generar un completo reporte financiero en formato PDF para un mes y año específicos. Este reporte es ideal para cierres contables e incluye estado de resultados, análisis de ventas, cuentas por cobrar, flujo de fondos y más.</p>
                <div class="my-4 border rounded-lg overflow-hidden shadow-lg">
                    <img src="{{ url_for('static', filename='img/manual_usuario/reporte_mensual.png') }}" alt="Captura de pantalla del reporte mensual de ventas" class="w-full">
                </div>

                <h3 class="text-xl font-semibold text-gray-700 mt-6 mb-2">Estadísticas</h3>
                <p class="mb-4"><span class="role-badge role-gerente">Gerente</span> <span class="role-badge role-superusuario">Superusuario</span></p>
                <p class="text-gray-600">Ofrece un análisis profundo de la rentabilidad del negocio. Puede filtrar por día, mes o un rango de fechas personalizado para visualizar gráficos y tablas con ventas, costos, utilidad neta, ranking de productos y clientes.</p>
            </section>

            <section id="configuracion" class="mb-12 bg-white p-6 rounded-lg shadow-md">
                <h2 class="text-2xl font-bold text-gray-800 mb-4"><i class="fas fa-cogs mr-2"></i>Configuración</h2>

                <h3 class="text-xl font-semibold text-gray-700 mb-2">Información de la Empresa</h3>
                <p class="mb-4"><span class="role-badge role-superusuario">Superusuario</span></p>
                <p class="text-gray-600">Aquí puede configurar los datos de su empresa (nombre, RIF, dirección, logo) que aparecerán en los reportes y notas de entrega impresas. También puede definir la moneda de cálculo principal del sistema (ej. USD).</p>

                <h3 class="text-xl font-semibold text-gray-700 mt-6 mb-2">Estructura de Costos</h3>
                <p class="mb-4"><span class="role-badge role-superusuario">Superusuario</span></p>
                <p class="text-gray-600">
                    Esta sección es fundamental para el cálculo de la rentabilidad. Aquí se definen los costos y gastos generales de la empresa:
                    <ul class="list-disc list-inside text-gray-600 space-y-2 mt-2">
                        <li><strong>Costos Fijos Mensuales:</strong> Alquiler, servicios, impuestos fijos.</li>
                        <li><strong>Gastos Variables por Defecto:</strong> Porcentajes de comisión por venta y de marketing que se aplicarán a todos los productos, a menos que un producto tenga un valor específico.</li>
                    </ul>
                </p>

                <h3 class="text-xl font-semibold text-gray-700 mt-6 mb-2">Editar Costos de Producto</h3>
                <p class="mb-4"><span class="role-badge role-gerente">Gerente</span> <span class="role-badge role-superusuario">Superusuario</span></p>
                <p class="text-gray-600">
                    Desde la "Lista de Costos", puede editar los parámetros financieros de cada producto individualmente:
                    <ul class="list-disc list-inside text-gray-600 space-y-2 mt-2">
                        <li><strong>Precio de Venta (USD):</strong> El precio final al público.</li>
                        <li><strong>Costo de Flete por Unidad:</strong> Si un producto tiene un costo de transporte específico.</li>
                        <li><strong>Ventas Mensuales Estimadas:</strong> Crucial para distribuir los costos fijos de la empresa entre los productos.</li>
                        <li><strong>Gastos Variables Específicos:</strong> Puede definir porcentajes de venta o marketing específicos para este producto, que anularán los valores por defecto.</li>
                    </ul>
                    En esta pantalla también se muestra un análisis de <strong>Punto de Equilibrio</strong> para el producto, indicando cuántas unidades necesita vender para cubrir todos sus costos asociados.
                </p>
                <div class="my-4 border rounded-lg overflow-hidden shadow-lg">
                    <img src="{{ url_for('static', filename='img/manual_usuario/editar_costos_producto.png') }}" alt="Captura de pantalla de la edición de costos de un producto" class="w-full">
                </div>

                <h3 class="text-xl font-semibold text-gray-700 mt-6 mb-2">Gestión de Usuarios y Accesos</h3>
                <p class="mb-4"><span class="role-badge role-superusuario">Superusuario</span></p>
                <p class="text-gray-600">
                    Esta sección, accesible solo para el Superusuario, permite gestionar las cuentas de los usuarios que pueden acceder al sistema, así como sus niveles de permiso (roles). Se encuentra en el menú lateral bajo "Configuración" > "Usuarios".
                </p>
                <ul class="list-disc list-inside text-gray-600 space-y-2 mt-4">
                    <li><strong>Crear Usuario:</strong> Puede añadir un nuevo usuario proporcionando un nombre de usuario, una contraseña y asignando un rol.</li>
                    <li><strong>Editar Usuario:</strong> Para cada usuario existente, puede cambiar su rol o establecer una nueva contraseña.</li>
                    <li><strong>Eliminar Usuario:</strong> Puede eliminar permanentemente la cuenta de un usuario.</li>
                </ul>
                <p class="mt-4 text-gray-600">
                    Es crucial asignar el rol correcto a cada usuario para mantener la seguridad e integridad de los datos del sistema.
                </p>
                
            </section>

            <section id="perfil" class="mb-12 bg-white p-6 rounded-lg shadow-md">
                <h2 class="text-2xl font-bold text-gray-800 mb-4"><i class="fas fa-user-circle mr-2"></i>Perfil de Usuario</h2>
                <p class="mb-4"><span class="role-badge role-todos">Todos los roles</span></p>
                <p class="text-gray-600">Haciendo clic en su nombre en el menú lateral, puede acceder a su perfil para ver y editar su información personal, como nombre, datos de contacto, redes sociales, información bancaria y foto de perfil.</p>
            </section>

        </div>
    </main>
</div>

</body>
</html>