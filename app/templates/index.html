{% extends "base.html" %}

{% block content %}
<div class="container mx-auto p-4">
    <h1 class="text-3xl font-bold text-gray-800 mb-6"><i class="fas fa-tachometer-alt mr-2"></i>Dashboard</h1>
    
    <!-- Sección de Métricas -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
        <!-- Tarjeta de Productos Totales -->
        <div class="bg-white rounded-lg shadow-md p-6 flex items-center justify-between relative">
            <div>
                <h2 class="text-gray-500 text-sm font-semibold uppercase">Productos Totales</h2>
                <p class="text-3xl font-bold text-gray-800">{{ total_products }}</p>
            </div>
            <div class="bg-blue-100 text-blue-500 p-3 rounded-full">
                <i class="fas fa-boxes text-2xl"></i>
            </div>
            <a href="{{ url_for('main.inventory_list') }}" class="absolute top-2 right-2 text-gray-400 hover:text-gray-600" title="Ver lista de productos">
                <i class="fas fa-list text-sm"></i>
            </a>
        </div>
        <!-- Tarjeta de Existencias Totales -->
        <div class="bg-white rounded-lg shadow-md p-6 flex items-center justify-between relative">
            <div>
                <h2 class="text-gray-500 text-sm font-semibold uppercase">Existencias Totales</h2>
                <p class="text-3xl font-bold text-gray-800">{{ total_stock }}</p>
            </div>
            <div class="bg-green-100 text-green-500 p-3 rounded-full">
                <i class="fas fa-box-open text-2xl"></i>
            </div>
            <a href="{{ url_for('main.inventory_stock') }}" class="absolute top-2 right-2 text-gray-400 hover:text-gray-600" title="Ver lista de existencias">
                <i class="fas fa-list text-sm"></i>
            </a>
        </div>
        <!-- Tarjeta de Clientes Totales -->
        <div class="bg-white rounded-lg shadow-md p-6 flex items-center justify-between relative">
            <div>
                <h2 class="text-gray-500 text-sm font-semibold uppercase">Clientes Totales</h2>
                <p class="text-3xl font-bold text-gray-800">{{ total_clients }}</p>
            </div>
            <div class="bg-yellow-100 text-yellow-500 p-3 rounded-full">
                <i class="fas fa-users text-2xl"></i>
            </div>
            <a href="{{ url_for('main.client_list') }}" class="absolute top-2 right-2 text-gray-400 hover:text-gray-600" title="Ver lista de clientes">
                <i class="fas fa-list text-sm"></i>
            </a>
        </div>
        <!-- Tarjeta de Órdenes Totales -->
        <div class="bg-white rounded-lg shadow-md p-6 flex items-center justify-between relative">
            <div>
                <h2 class="text-gray-500 text-sm font-semibold uppercase">Órdenes Totales</h2>
                <p class="text-3xl font-bold text-gray-800">{{ total_orders }}</p>
            </div>
            <div class="bg-red-100 text-red-500 p-3 rounded-full">
                <i class="fas fa-shopping-cart text-2xl"></i>
            </div>
            <a href="{{ url_for('main.order_list') }}" class="absolute top-2 right-2 text-gray-400 hover:text-gray-600" title="Ver lista de órdenes">
                <i class="fas fa-list text-sm"></i>
            </a>
        </div>
    </div>
    
    <!-- Sección de Últimas Actividades -->
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
        <!-- Productos Recientes -->
        <div class="bg-white rounded-lg shadow-md p-6 relative">
            <h2 class="text-xl font-semibold text-gray-700 mb-4">Productos Recientes</h2>
            <a href="{{ url_for('main.new_product') }}" class="absolute top-4 right-4 text-gray-400 hover:text-gray-600" title="Agregar nuevo producto">
                <i class="fas fa-plus-circle text-lg"></i>
            </a>
            <ul class="space-y-4">
                {% for product in recent_products %}
                <li class="flex items-center space-x-3">
                    <i class="fas fa-box text-blue-500 text-xl"></i>
                    <div>
                        <a href="{{ url_for('main.product_detail', product_id=product.id) }}" class="text-blue-600 hover:underline font-medium">{{ product.name }}</a>
                        <p class="text-sm text-gray-500">
                            Código: {{ product.barcode }} |
                            <!-- Costo: ${{ "%.2f"|format(product.cost_usd) }} |-->
                            Precio: Bs. {{ "%.2f"|format(product.price_usd * current_rate) }} |
                            Existencias: {{ product.stock }}
                        </p>
                    </div>
                </li>
                {% endfor %}
            </ul>
        </div>
        <!-- Órdenes Recientes -->
        <div class="bg-white rounded-lg shadow-md p-6 relative">
            <h2 class="text-xl font-semibold text-gray-700 mb-4">Órdenes Recientes</h2>
            <a href="{{ url_for('main.new_order') }}" class="absolute top-4 right-4 text-gray-400 hover:text-gray-600" title="Crear nueva orden">
                <i class="fas fa-plus-circle text-lg"></i>
            </a>
            <ul class="space-y-4">
                {% for order in recent_orders %}
                <li class="flex items-center space-x-3">
                    <i class="fas fa-shopping-cart text-green-500 text-xl"></i>
                    <div>
                        <a href="{{ url_for('main.order_detail', order_id=order.id) }}" class="text-green-600 hover:underline font-medium">Orden #{{ order.id }}</a>
                        <p class="text-sm text-gray-500">
                            Cliente: {{ order.client.name }} |
                            Fecha: {{ order.date_created.strftime('%d/%m/%Y') }} |
                            Monto Total: Bs. {{ "%.2f"|format(order.total_amount) }}
                        </p>
                    </div>
                </li>
                {% endfor %}
            </ul>
        </div>
    </div>
</div>
{% endblock %}