{% extends "base.html" %}

{% block content %}
<div class="container mx-auto p-4 max-w-3xl">
    <div class="flex items-center justify-between mb-6">
        <h1 class="text-3xl font-bold text-gray-800"><i class="fas fa-calendar-check mr-2"></i>Cierre Diario</h1>
    </div>

    <div class="bg-white p-8 rounded-lg shadow-md">
        <h2 class="text-xl font-semibold text-gray-700 mb-4">Generar Reporte de Cierre</h2>
        <form id="report-form">
            <div class="mb-6">
                <label for="date" class="block text-sm font-medium text-gray-700 mb-2">Seleccione la fecha para el reporte:</label>
                <input type="date" id="date" name="date" value="{{ report_date.strftime('%Y-%m-%d') }}" class="block w-full max-w-xs rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm">
            </div>

            <p class="text-gray-600 mb-6">
                Elija el formato del reporte que desea generar para el d√≠a <strong><span id="selected-date-display">{{ report_date.strftime('%d/%m/%Y') }}</span></strong>.
            </p>

            <div class="flex flex-col sm:flex-row gap-4">
                <button type="submit" formaction="{{ url_for('main.print_daily_closing_report') }}" formtarget="_blank" class="flex-1 bg-gray-600 text-white font-bold py-3 px-6 rounded-lg hover:bg-gray-700 transition-colors text-lg text-center">
                    <i class="fas fa-receipt mr-2"></i>Generar Reporte tipo Ticket
                </button>
                <button type="submit" formaction="{{ url_for('main.print_daily_closing_report_pdf') }}" formtarget="_blank" class="flex-1 bg-red-600 text-white font-bold py-3 px-6 rounded-lg hover:bg-red-700 transition-colors text-lg text-center">
                    <i class="fas fa-file-pdf mr-2"></i>Generar Reporte PDF (A4)
                </button>
            </div>
        </form>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const dateInput = document.getElementById('date');
    const dateDisplay = document.getElementById('selected-date-display');

    dateInput.addEventListener('change', function() {
        const date = new Date(this.value + 'T00:00:00'); // Add time to avoid timezone issues
        const day = String(date.getDate()).padStart(2, '0');
        const month = String(date.getMonth() + 1).padStart(2, '0');
        const year = date.getFullYear();
        dateDisplay.textContent = `${day}/${month}/${year}`;
    });
});
</script>
{% endblock %}