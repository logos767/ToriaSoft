{% extends "base.html" %}

{% block content %}
<div class="container mx-auto p-4 max-w-4xl">
    <div class="flex items-center justify-between mb-6">
        <h1 class="text-3xl font-bold text-gray-800"><i class="fas fa-hands-helping mr-2"></i>{{ title }}</h1>
        <div>
            {% if service_order.status == 'Completado' and service_order.service_value_usd > 0 %}
                <a href="{{ url_for('main.pay_marketing_service', service_id=service_order.id) }}" class="bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded-lg shadow-md transition duration-300"><i class="fas fa-money-bill-wave mr-2"></i>Pagar Servicio</a>
            {% endif %}
            <a href="{{ url_for('main.marketing_service_list') }}" class="text-blue-500 hover:underline ml-4"><i class="fas fa-arrow-left mr-1"></i> Volver al Historial</a>
        </div>
    </div>

    <div class="bg-white p-6 rounded-lg shadow-md">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <!-- Columna Izquierda: Detalles del Servicio -->
            <div>
                <h2 class="text-xl font-semibold text-gray-700 mb-4 border-b pb-2">Detalles del Servicio</h2>
                <div class="space-y-3 text-gray-600">
                    <p><strong>Código de Servicio:</strong> <span class="font-mono bg-gray-100 px-2 py-1 rounded">{{ service_order.service_code }}</span></p>
                    <p><strong>Descripción:</strong> <span class="font-medium">{{ service_order.service_description }}</span></p>
                    <p><strong>Fecha del Servicio:</strong> <span class="font-medium">{{ service_order.date.strftime('%d/%m/%Y') }}</span></p>
                    <p><strong>Estado:</strong>
                        <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full
                            {% if service_order.status == 'Completado' or service_order.status == 'Aplicado' %}bg-green-100 text-green-800
                            {% else %}bg-yellow-100 text-yellow-800{% endif %}">
                            {{ service_order.status }}
                        </span>
                    </p>
                    <p class="text-2xl font-bold {% if service_order.service_value_usd >= 0 %}text-green-600{% else %}text-red-600{% endif %}">
                        <strong>Valor:</strong> {{ currency_symbol }} {{ "%.2f"|format(service_order.service_value_usd) }}
                    </p>
                </div>
            </div>

            <!-- Columna Derecha: Detalles del Proveedor y Registro -->
            <div>
                <h2 class="text-xl font-semibold text-gray-700 mb-4 border-b pb-2">Información Adicional</h2>
                <div class="space-y-3 text-gray-600">
                    <p><strong>Proveedor:</strong> <a href="{{ url_for('main.provider_detail', provider_id=service_order.provider.id) }}" class="text-blue-600 hover:underline font-medium">{{ service_order.provider.name }}</a></p>
                    <p><strong>Registrado por:</strong> <span class="font-medium">{{ service_order.user.username }}</span></p>
                    <p><strong>Fecha de Registro:</strong> <span class="font-medium">{{ service_order.date.strftime('%d/%m/%Y %I:%M %p') }}</span></p>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}